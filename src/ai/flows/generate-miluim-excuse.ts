'use server';

/**
 * @fileOverview Excuse generator for soldiers in their final 48 hours of reserve duty.
 *
 * - generateMiluimExcuse - A function that generates a random excuse.
 * - GenerateMiluimExcuseInput - The input type for the generateMiluimExcuse function (currently empty).
 * - GenerateMiluimExcuseOutput - The return type for the generateMiluimExcuse function (contains the excuse).
 */

import {ai} from '@/ai/genkit';
import {z} from 'zod';

const GenerateMiluimExcuseInputSchema = z.object({});
export type GenerateMiluimExcuseInput = z.infer<typeof GenerateMiluimExcuseInputSchema>;

const GenerateMiluimExcuseOutputSchema = z.object({
  excuse: z.string().describe('A plausible and funny excuse for a soldier to avoid a task.'),
});
export type GenerateMiluimExcuseOutput = z.infer<typeof GenerateMiluimExcuseOutputSchema>;

export async function generateMiluimExcuse(input: GenerateMiluimExcuseInput): Promise<GenerateMiluimExcuseOutput> {
  return generateMiluimExcuseFlow(input);
}

const generateMiluimExcuseFlow = ai.defineFlow(
  {
    name: 'generateMiluimExcuseFlow',
    inputSchema: GenerateMiluimExcuseInputSchema,
    outputSchema: GenerateMiluimExcuseOutputSchema,
  },
  async () => {
    const excuses = [
        "אני חייב ללכת להאכיל את היונה של המפקד, היא אוכלת רק אבוקדו אורגני.",
        "קיבלתי פקודה סודית מהרס\"ר: למצוא את המתכון הסודי של השניצל מהחדר אוכל.",
        "אני בתרגולת יוגה צבאית חדשה, 'תנוחת השביזות'.",
        "המצפן שלי מראה רק לכיוון הבית, אני חושב שהוא מקולקל.",
        "אני חייב ללכת לחדש את המלאי של בדיחות הקרש שלי, המורל ביחידה נמוך.",
        "הרופא אמר לי שאני אלרגי למשימות של הרגע האחרון.",
        "אני בשיחת זום עם אמא, היא רוצה לוודא שאני לובש סוודר.",
        "הג'יפ לא מניע, אני חושב שהלכו המצופים.",
        "אני צריך לנקות את האבק מהדרגות, זה מוריד מהפאסון.",
        "הזדחלתי יותר מדי חול בנעליים, אני חייב ללכת לרוקן.",
        "אני בודק אם השאירו לי קינוח במטבח, זה עניין של מורל.",
        "המפקד ביקש ממני לכתוב את האוטוביוגרפיה שלו, אני הסופר צללים.",
        "איבדתי את הכומתה שלי, אני בטוח שחייזרים חטפו אותה.",
        "אני מנסה ללמד את התוכי של הבסיס להגיד 'אין עוד מלבדו'.",
        "השק\"ם נסגר עוד 5 דקות, זו ריצת אמוק.",
        "אני צריך להרכיב פלייליסט לשמירה, זה קריטי לשמירה על עירנות.",
        "החלטתי לעשות בדק בית לנשק, מצאתי שם פירורים של במבה מ-2012.",
        "קיבלתי משימה למצוא את כל החתולים בבסיס ולתת להם שמות.",
        "אני בתחרות בהייה עם הקיר, אני חושב שאני מנצח.",
        "הפסיכולוגית הצבאית אמרה שאני צריך יותר 'זמן אני' איכותי.",
        "אני צריך להכין מצגת פאוורפוינט על החשיבות של שתיית מים.",
        "אני מחפש מטען לאייפון 4, המפקד מתעקש שזה קיים איפשהו.",
        "אני באמצע סשнן מדיטציה עמוק כדי להתחבר לשורשים של הזית ליד הש.ג.",
        "אני בודק תאריכי תפוגה על כל מנות הקרב, מישהו צריך לעשות את זה.",
        "הרס\"פ ביקש ממני באופן אישי לסדר את כל הכפיות לפי גודל.",
        "אני חייב לסיים לקרוא את 'מלחמה ושלום', נשאר לי רק עוד עמוד אחד.",
        "אני מתרגל הליכת ירח למסדר הסיום, זה יהיה מופע בלתי נשכח.",
        "האפליקציה של מזג האוויר אומרת שיש סיכוי לטפטוף, אני בודק מחסות.",
        "אני מעביר סדנת אוריגמי לחיילים צעירים, מקפלים קסדות מנייר.",
        "אני מנסה לשבור שיא גינס בהחזקת אוויר.",
        "יש לי תור דחוף למספרה הצבאית, המראה חשוב גם במילואים.",
        "אני בדרך להגיש בקשה רשמית לשנות את צבע הכומתה לוורוד.",
        "התנדבתי להיות בודק הטעם הרשמי של הקפה במפקדה.",
        "אני מחפש את האזיקון האחרון שנשאר בבסיס, למשימה סודית.",
        "אני צריך למלא דוח נוכחות על היונים שמקננות על הגג.",
        "אני מארגן טורניר שש-בש יחידתי, הפרס הגדול הוא פטור מתורנות.",
        "אני בודק אם אפשר לקלוט רדיו רוסי מהאנטנה של הקשר.",
        "אני מנסה להבין למה קוראים לזה 'אפטר' אם זה לפני הלילה.",
        "אני צריך לצבוע את האבנים של השביל בכניסה לבסיס בלבן. שוב.",
        "אני אחראי על פרויקט מיפוי כל השקעים החשמליים התקינים בבסיס.",
        "נקלעתי לוויכוח פילוסופי עם הש.ג. על משמעות החיים.",
        "אני כותב מכתב תלונה רשמי על איכות הנייר טואלט.",
        "הלכתי לחפש את עצמי, אמרו לי שאני נמצא איפשהו ליד המגורים.",
        "אני צריך להשקות את עציץ הפלסטיק במשרד של המפקד, הוא נראה צמא.",
        "אני מנסה ללמוד לדבר עם נמלים, הן יודעות הכל.",
        "קיבלתי משימה מיוחדת: לוודא שאף אחד לא גונב את השמש.",
        "אני אחראי על ספירת הגרגירי חול במגרש מסדרים.",
        "אני מתכנן את מסיבת הסיום של המילואים, זה דורש ריכוז מלא.",
        "אני בדיוק בשיחה חשובה עם 'ידידי הטוב' מהשב\"כ, הוא דורש דיווח.",
        "אני צריך לתקן את האינטרנט, ראיתי ביוטיוב איך עושים את זה."
      ];
    const randomIndex = Math.floor(Math.random() * excuses.length);
    const excuse = excuses[randomIndex];
    return { excuse };
  }
);
